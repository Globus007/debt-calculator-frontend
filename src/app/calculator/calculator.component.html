<div class="calculator-body container">
    <h2 class="container calculator-heading my-md-0 py-5 text-center">Калькулятор задолженности</h2>

    <div id="calculator" class="calculator-input">

        <form [formGroup]="calculatorFormGroup" (ngSubmit)="onSubmit()">

        <mat-horizontal-stepper labelPosition="bottom">
            <mat-step class="step-header">
                <ng-template matStepLabel>Должник</ng-template>
                <app-debtor [calculatorFormGroup]="calculatorFormGroup"></app-debtor>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Договор</ng-template>
                <app-contract [calculatorFormGroup]="calculatorFormGroup"></app-contract>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Счета</ng-template>
                    <h5 class="heading mt-5">
                        Введите информацию о счетах
                        <button type="button" (click)="addBill()" class="btn btn-outline-info btn-sm">Добавить счёт</button>
                    </h5>
                    <div class="mb-2" formArrayName="bills" *ngFor="let bill of bills; let i=index">
                        <app-bill 
                            [index]="i" 
                            [bill]="bill"
                            [billFormArray]="billFormArray">
                        </app-bill>
                    </div>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Общий долг</ng-template>
                <app-balance [calculatorFormGroup]="calculatorFormGroup"></app-balance>
            </mat-step>

            <mat-step>
                <ng-template matStepLabel>Рассчет</ng-template>
                <app-calculation-date [calculatorFormGroup]="calculatorFormGroup"></app-calculation-date>
            </mat-step>

        </mat-horizontal-stepper>

        <app-calculation-info *ngIf="hasCalculation()"></app-calculation-info> 
        <app-error *ngIf="hasError()"></app-error> 


        </form>
    </div>
</div>